# Regression 대회 (김홍석)

# 1. Feature 추가
#### 1-1. 좌표X, 좌표Y : 좌표X, 좌표Y 결측치를 크롤링하여 처리
#### 1-2. 지하철 역 데이터 : 가장 가까운 지하철역 거리, 가장 가까운 지하철역 호선, 1.5km이내 지하철역 개수
#### 1-3. 버스 정류장 데이터 : 가장 가까운 버스 정류장 거리, 300m이내 버스 정류장 개수
#### 1-4. GDP 데이터 : 계약년도의 GDP 정보
#### 1-5. 한국은행 기준금리 : 계약년월의 한국은행 기준금리 정보
#### 1-6. 인플레이션 : 기대 인플레이션 정보 사용, 계약년월에 해당하는 기대 인플레이션 정보
#### 1-7. 지가지수 : 서울 전체에 대한 지가지수 사용, 계약년월에 해당하는 지가지수 정보
#### 1-8. 아파트 인허가 : 계약년월에 해당하는 아파트 인허가 정보
#### 1-9. 미분양 : 계약년월에 해당하는 미분양 정보
#### 1-10. 거래량 : 계약년월에 해당하는 거래량 정보
#### 1-11. 건설사 : 건물 건설사에 대한 랭크 적용
#### 1-12. 시, 군, 구 : 원본 데이터의 '시군구'를 활용하여 '시', '구', '동' 추출
#### 1-13. 구별 지가지수 : 구별 계약년월에 해당하는 지가지수 정보
#### 1-14. 공시지가 : 구별 해당 년도의 공시지가 평균 정보
#### 1-15. 매수우위지수 : 계약년월에 해당하는 매수우위지수 정보
#### 1-16. 건물나이 : 30년 이상 and 50년 이하 (1), 나머지 (0)
#### 1-17. 구매력지수
#### 1-18. 거래활발지수
#### 1-19. 아파트 매매가격 지수 증감률 : 구별로 따로 적용
#### 1-20. 아파트 매매가격 대비 전세가격 비율
#### 1-21. 아파트 이름 카테고리화 : ['더퍼스트', '센트럴', '파크', '포레', '메트로', '에듀', '시티']가 들어있는지 카테고리화
#### 1-22. 지하철 노선 카테고리화 : ['2호선', '3호선', '4호선', '5호선', '6호선', '7호선', '9호선', '경원선', '분당선'] & data v.2 ['2호선', '3호선', '9호선', '분당선']
#### 1-23. 지역구를 카테고리화 : ['강남구', '서초구', '송파구', '용산구', '동작구', '성동구', '영등포구', '광진구', '마포구’, ‘기타’]
#### 1-24. 아파트 건설사를 카테고리화 : - [‘우성', '포스코', '대한주택공사', '현대', '삼성', '대우', '쌍용', '중앙', '태영', '신동아', '고려', 'GS|gs|지에스', '한화', '한진', '건영', 'LG|lg|엘쥐|엘지', '극동', '경동', 'LIG|lig', '진흥', '풍림', '우방', '청구', 'KCC|kcc', '한라', '힐스테이트', '미주'] -> test data에 있는 것 중 선택
#### 1-25. 한강다리 정보 : 한강다리와 관련된 정보 추가 (가장 가까운 거리, 1.5km이내에 존재하는 다리 개수 등)
#### 1-26. 인근 한강다리 개수를 카테고리화 : 1이상3이하, 0개및4개
#### 1-27. 학군정보 : 각 구가 몇 학군이지 추가
#### 1-28. target 이상치 처리 : 각 아파트에 대해서 비슷한 시기의 가격과 비교하여 이상치 파악 및 처리 -> 정확도가 너무 안 좋게 나와서 사용x
#### 1-29. '전용면적'대비 'target'이상치 처리 : '전용면적'이 300이 넘는 데이터들 중 일부의 가격이 실제보다 낮게 측정. -> 강제로 2배로 만들어줬다.
#### 1-31. '아파트 매매가격지수' : 이상치 처리한 데이터에 '구', '계약년월'에 맞춰서 추가
#### 1-32. '아파트 매매가격지수' : 이상치 처리 없이 feature 추가
#### 1-33. '지하철 카테고리' 수정 : ['분당선', '3호선', '2호선', '5호선', '9호선']

# 2. 모델
## model_maker
- base_model.ipynb : 기본 모델 생성
- district_model.ipynb : '구'별 별도의 모델 생성
- k_fold_model.ipynb : k-fold사용

#### 2-1~10. 그냥 해당 데이터 사용하여 모델 생성 (rmse: 16829.4283)
#### 2-11. 건설사 랭킹 사용
    - v.11 : 건설사 랭킹 (rmse: 16986.9121)
    - v.11.2 : 건설사 랭킹 제외
    - v.11.3 : 계약월_sin미사용, 일부 호선 제거 (rmse: 16945.7318)
#### 2-13. 구별 지가지수 
    - v.13.1 : 각 지역을 나눠서 모델 생성 (rmse: 17070.1640)
    - v.13.2 : '구별 지가지수' 스케일링시 구별로 나눠서 진행, 각 지역을 나누서 모델 생성, 미분양&거래량 사용X (rmse: 63824.9543)
#### 2-14. 공시지가 평균
    - v.14 : 구별로 나눠서 모델 생성 (rmse: 16960.2199)
    - v.14.2 : 구별로 나누지 않고 모델 생성 (rmse: 16598.0163)
    - v.14.3 : 일부 지하철 노선 제거 (rmse: 16473.1485)
#### 2-15. 매수우위지수
    - v.15 : 하나의 모델 생성, 지하철 노선 일부 제거 (rmse: 15870.6800)
#### 2-16. 건물나이
    - v.16 : 하나의 모델 생성, 지하철 노선 일부 제거 (rmse: 15549.0217)
#### 2-17. 구매력지수
    - v.17 : (rmse: 17936.5836)
    - v.17.2 : 건물나이 제거 (rmse: 18777.9918)
##### 2-18. 거래활발지수
    - v.18.1 : (valid rmse: 5746)
    - v.18.1.2 : learnin_rate를 0.05로 조정 (valid rmse: 5703)
##### 2-19. 아파트 매매가격 지수 증감률
    - v.19.1 : (valid rmse: 5855)
#### 2-20. 아파트 매매가격 대비 전세가격 비율
    - v.20.1 : 구매력 지수 사용 안 함 (valid rmse: 5871, submission rmse: 16224)
    - v.20.2 : 구매력 지수 사용 안 함 (valid rmse: 5871.92)
    - v.20.2.2 : learning_rate=0.01, reg_alpha=0.05
#### 2-21. 아파트이름 카테고리
    - 모델생성 x
##### 2-22. 지하철 노선 카테고리
    - v.22.1 : (valid rmse: 5657, submission rmse: 15385)
    - v.22.data_v.2 : (valid rmse: 5831)
#### 2-23. 지역구 카테고리
    - v.23.1 : (valid rmse: 5629, submission rmse: 16258)
    - v.23.data_v.2 : (valid rmse: 5691)
#### 2-24. 건설사 카테고리
    - v.24.1 : (valid rmse: 5716)
#### 2-25. 한강다리 정보
    - 모델 생성 x
#### 2-26. 인근 한강다리 개수 카테고리
    - v.26 : (valid rmse: 5642, submission rmse: 15627)
    - v.26.2 : ['구 카테고리'] 제거 (valid rmse: 5726)
    - v.26.3 : ['구 카테고리', '건설사 카테고리'] 제거 (valid rmse: 5655)
#### 2-27. 학군정보
    - v.27 : 학군정보는 카테고리 타입으로 변환하여 사용 (valid rmse: 5581, submission rmse: 15633)
#### 2-28. target 이상치 처리
    - v.28 : (valid rmse: 10000이상)
#### 2-29. '전용면적'대비 'target'이상치 처리
    - v.29 : v.22와 동일 feature 사용, 데이터 분할 landom_state=64 (valid rmse: 5620)
#### 2-30. feature importance 확인
    - v.30 : 전체 feature에 대해 feature importance를 확인하기 위해 모든 feature 사용
    - v.30.2 : '구별 지가지수'대신 '지가지수'사용 (valid rmse: 5628, submission rmse: 16850)
    - v.30.3 : scaling 안 함 (valid rmse: 5622)
#### 2-31. 아파트 매매가격지수 (이상치 처리)
    - v.31 : 스케일링 없이 모델 생성 (valid rmse: 5610)
    - v.31.4 : 스케일링 수행 (submission rmse: 16485)
#### 2-32. 아파트 매매가격지수 (이상치 처리 x)
    - v.32 : 스케일링 수행, v.22 feature에서 '가장 가까운 다리와의 거리', '학군', '매매가격 지수' 추가 (valid rmse: 5592)
    - v.32.2 : 스케일링 안 함 (valid rmse: 5663)
    - v.32.3 : 각 구별로 모델을 따로 생성 (각각의 구마다 valid rmse가 다르다)
#### 2-33. '지하철 카테고리'수정
    - v.33 : (valid rmse: 5835)

# 3. 정확도를 높이기 위한 노력들
### 3-1. 다양한 하이퍼파라미터 조정
    - 정확도 향상을 확인하지 못 했다.
### 3-2. 예측의 편향성 확인
    - train 데이터를 사용하여 예측 수행
    - 예측값과 실제값의 차이 확인
    - 예측값이 더 크게 예측하거나 작게 예측하는지 체크
    - 사실상 두 값의 분포 차이에 특정한 규칙을 발견하지 못함
    - 특정 비율을 적용하여 결과를 조정하는 것은 사실상 불가능하다고 판단
### 3-3. test 데이터 예측 값들을 비교
    - submission 결과가 좋은 결과와 안 좋은 결과들을 함께 비교
    - 만약 결과가 안 좋은 값이 항상 크거나 작은 경우 정답 값의 위치를 유추할 수 있을 것이라는 가정
    - 전체적인 모양은 거의 동일하다.
    - but 수치적으로 약간씩의 차이가 발생
    - 사실상 결과값에 반영할 수 있는 규칙을 발견하지는 못했다.